<html>

<head>
    <title>Ritchie Onboarding</title>
    <link rel="stylesheet" href="./ui/tool-selection/index.css">
</head>

<script type="text/tiscript">
    $(#tools).onControlEvent = function(evt) {
        if (evt.type == (Event.SELECT_STATE_CHANGED)) {            
            if (evt.source.checked != true) {
                if (evt.source.id == "") {
                    removeElements(evt);
                }

                removeElement(evt.source.id);
                return;
            }
            
            if (evt.source.id == ""){
                appendElements(evt);
                return;       
            }
                
            appendElement(evt.source.text);
        }
    }

    $(#selected).onControlEvent = function(evt) {
        if (evt.type == (Event.BUTTON_CLICK)) {
            $(#{evt.source.text}).state.checked = false;
            
            if (checkParent(evt) == false) {
                $(#{evt.source.text}).parent.state.checked = false;
            }

            evt.source.remove(); 
        }
    }

    function appendElement(text) {
        const element = <button|checkbox class="btn-tools" id={text} checked>{text}</button>;                        

        $(#selected).append(element);        
    }

    function appendElements(evt) {
        for (var item in evt.source) {
            if (item.id != "") {
                appendElement(item.id);
            }                 
        }
    }

    function removeElement(id) {
        if (id != "") {
            $(button#{id}).remove();
        }
    }

    function removeElements(evt) {
        for (var item in evt.source) {
            removeElement(item.id);
        }
    }

    function checkParent(evt) {
        var checked = false;

        for (var item in $(#{evt.source.text}).parent) {
            if (item.id == "") {
                continue;
            }

            if (item.state.checked == true) {
                checked = true;
            }
        }

        return checked;
    }
</script>

<body>
    <header>
        <div class="banner-displayed">
            <img src="./ui/tool-selection/img/banner.png" alt="Banner Ritchie" />
        </div>
    </header>
    <main>
        <div>
            <div class="tools">
                <h1 class="title">Ferramentas</h1>
                <div class="search">
                    <form>
                        <input type="text" novalue="Search..." name="search">
                        <button type="submit" class="button-search icons8-search"></button>
                    </form>
                </div>
                <div class="function">
                    <select name="select">
                        <option selected="selected" class="select-custom-default" value="backend">backend</option>
                        <option class="select-custom-default" value="dev-ios">dev-ios</option>
                        <option class="select-custom-default" value="dev-java">dev-java</option>
                        <option class="select-custom-default" value="dev-qa">dev-qa</option>
                        <option class="select-custom-default" value="sre">sre</option>
                    </select>
                </div>
                <div class="selection-tools">
                    <select|tree #tools multiple=checkmarks>
                        <option>
                            <caption>Browser</caption>
                        <option #Chome value="Chome">Chome</option>
                        <option #Firefox value="Firefox">Firefox</option>
                        </option>
                        <option>
                            <caption>Ides</caption>
                        <option #Android-Studio value="Android-Studio">Android-Studio</option>
                        <option #Intellij value="Intellij">Intellij</option>
                        <option #VSCode value="VSCode">VSCode</option>
                        <option #Golang value="Golang">Golang</option>
                        <option #WebStorm value="WebStorm">WebStorm</option>
                        <option #Atom value="Atom">Atom</option>
                        </option>
                        <option expanded>
                            <caption>CLI</caption>
                        </option>
                        <option expanded>
                            <caption>Tools</caption>
                        </option>
                        <option expanded>
                            <caption>Dependecy-manager</caption>
                        </option>
                        </select>
                </div>
            </div>
            <div class="container-selected-tools">
                <h1 class="title">Ferramentas Selecionadas</h1>
                <div class="selected-tools">
                    <select|list #selected></select>
                </div>
            </div>
        </div>
    </main>
    <footer>
        <div class="buttons">
            <button #cancel class="button cancel">Cancelar</button>
            <button #continue class="button continue">Continuar</button>
        </div>
    </footer>

    <script type="text/tiscript">
        event click $(#cancel){
            view.close()
        }
    </script>
</body>

</html>